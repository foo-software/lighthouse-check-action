"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _nodeFetch = _interopRequireDefault(require("node-fetch"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// https://developers.google.com/speed/docs/insights/rest/v5/pagespeedapi/runpagespeed
const PSI_API_URL = 'https://pagespeedonline.googleapis.com/pagespeedonline/v5/runPagespeed';

var _default = async ({
  psiKey,
  strategy,
  url
}) => {
  const psiApiUrl = `${PSI_API_URL}?url=${encodeURIComponent(url)}&category=ACCESSIBILITY&category=BEST_PRACTICES&category=PERFORMANCE&category=PWA&category=SEO&strategy=${strategy}&key=${psiKey}`;
  const psiResponse = await (0, _nodeFetch.default)(psiApiUrl);
  return psiResponse.json();
};

exports.default = _default;